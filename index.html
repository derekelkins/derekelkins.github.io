<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <meta name="description" content="A blog mostly on math, physics, and computer science.">
    <meta name="author" content="Derek Elkins">
    <!--<link rel="icon" href="/images/favicon.ico">-->

    <title>Home</title>
    <!-- Bootstrap core CSS -->
    <link href="./css/bootstrap.min.css" rel="stylesheet">
    <!-- Custom styles for this template -->
    <link href="./css/blog.css" rel="stylesheet">
    <link href="./css/syntax.css" rel="stylesheet">
  </head>

  <body>
    <div class="blog-masthead">
      <div class="container">
        <nav class="blog-nav">
          <a class="blog-nav-item active" href="./">Home</a>
          <a class="blog-nav-item " href="./about.html">About</a>
          <a class="blog-nav-item " href="./contact.html">Contact</a>
          <a class="blog-nav-item " href="./readinglist.html">Reading List</a>
          <a class="blog-nav-item " href="./archive.html">Archive</a>
          <a class="blog-nav-item pull-right" href="./rss.xml">RSS</a>
          <a class="blog-nav-item pull-right" href="./atom.xml">Atom</a>
        </nav>
      </div>
    </div>

    <div class="container">
      
          <div class="blog-header">
            <a href="./"><h1 class="blog-title">Hedonistic Learning</h1></a>
            <p class="lead blog-description">Learning for the fun of it</p>
          </div>
      
      <div class="row">
        
        <div class="col-sm-8 blog-main">
        
          
    <div class="blog-post teaser panel panel-default">
    <div class="panel-heading">
        <h2 class="blog-post-title"><a href="./posts/internal-language-of-a-monoidal-category.html">Internal Language of a Monoidal Category</a></h2>
        <h6 class="pull-right" style="margin-top: -1.5ex"><a data-disqus-identifier="3f996120-0b87-43ac-b93d-c17395708c46" href="./posts/internal-language-of-a-monoidal-category.html#disqus_thread"></a></h6>
    </div>

    <div class="panel-body">
        
            <h2 id="introduction">Introduction</h2>
<p>This is the first post in a series of posts on doing enriched indexed category theory and using the notion of an internal language to make this look relatively mundane. The internal language aspects are useful for other purposes too, as will be illustrated in this post, for example. This is related to the post <a href="./posts/category-theory-syntactically.html">Category Theory, Syntactically</a>. In particular, it can be considered half-way between the unary theories and the finite product theories described there.</p>
<p>First in this series – this post – covers the internal language of a monoidal category. This is fairly straightforward, but it already provides some use. For example, the category of endofunctors on a category is a strict monoidal category, and so we can take a different perspective on natural transformations. This will also motivate the notions of a (virtual) bicategory and an actegory. Throughout this post, I’ll give a fairly worked example of turning some categorical content into <a href="./posts/understanding-typing-judgments.html">rules</a> of a type-/proof-theory.</p>
<p>The second post will add indexing to the notion of monoidal category and introduce the very powerful and useful notion of an <a href="https://ncatlab.org/nlab/show/indexed+monoidal+category">indexed monoidal category</a>.</p>
<p>The third post will formulate the notion of <a href="https://arxiv.org/abs/1212.3914">categories enriched in an indexed monoidal category</a> and give the definitions which don’t require any additional assumptions.</p>
<p>The fourth post will introduce the notion and internal language for an indexed cosmos. Normally, when we do enriched category theory, we want the category into which we’re enriching to not be just a monoidal category but a <a href="https://ncatlab.org/nlab/show/cosmos">cosmos</a>. This provides many additional properties. An indexed cosmos is just the analogue of that for indexed monoidal categories.</p>
<p>The fifth post will then formulate categorical concepts for our enriched indexed categories that require some or all of these additional properties provided by an indexed cosmos.</p>
<p>At some point, there will be a post on <a href="https://ncatlab.org/nlab/show/virtual+double+category">virtual double categories</a> as they (or, even better, <a href="https://arxiv.org/abs/1910.11189">augmented virtual double categories</a>) are what will really be behind the notion of enriched indexed categories we’ll define. Basically, we’ll secretly be spelling out a specific instance of the |\mathsf{Mod}| construction.</p>

            <h6><a href="./posts/internal-language-of-a-monoidal-category.html">Read more...</a></h6>
        
    </div>

    <div class="panel-footer">
        <h6 class="blog-post-meta">
            May 22, 2020 08:46 UTC
            
            (Last updated on May 22, 2020 08:46 UTC)

            
                Tags: <a title="All pages tagged 'math'." href="./tags/math.html">math</a>, <a title="All pages tagged 'category theory'." href="./tags/category%20theory.html">category theory</a>
            
        </h6>
    </div>

</div><!-- /.blog-post -->



    <div class="blog-post teaser panel panel-default">
    <div class="panel-heading">
        <h2 class="blog-post-title"><a href="./posts/example-representability-argument.html">Example Representability Argument</a></h2>
        <h6 class="pull-right" style="margin-top: -1.5ex"><a data-disqus-identifier="06b69aaa-9713-4709-a6d3-dd821f2df0fe" href="./posts/example-representability-argument.html#disqus_thread"></a></h6>
    </div>

    <div class="panel-body">
        
            <h3 id="introduction">Introduction</h3>
<p>When I was young and dumb and first learning category theory, I got it into my head that arguments involving sets were not “categorical”. This is not completely crazy as the idea of category theory being an alternate “foundation” and categorical critiques of set theoretic reasoning are easy to find. As such, I tended to neglect techniques that significantly leveraged |\mathbf{Set}|, and, in particular, representability. Instead, I’d prefer arguments using universal arrows as those translate naturally and directly to 2-categories.</p>
<p>This was a mistake. I have long since completely reversed my position on this for both practical and theoretical reasons. Practically, representability and related techniques provide very concise definitions which lead to concise proofs which I find relatively easy to formulate and easy to verify. This is especially true when combined with the (co)end calculus. It’s also the case that for a lot of math you simply don’t need any potential generality you might gain by, e.g. being able to use an arbitrary 2-category. Theoretically, I’ve gained a better understanding of where and how category theory is (or is not) “foundational”, and a better understanding of what about set theory categorists were critiquing. Category theory as a whole does <em>not</em> provide an alternate foundation for mathematics as that term is usually understood by mathematicians. A branch of category theory, topos theory, does, but a topos is fairly intentionally designed to give a somewhat |\mathbf{Set}|-like experience. Similarly, many approaches to higher category theory still include a |\mathbf{Set}|-like level.</p>
<p>This is, of course, not to suggest ideas like universal arrows <em>aren’t</em> important or can’t lead to elegant proofs.</p>
<p>Below is a particular example of attacking a problem from the perspective of representability. I use this example more because it is a neat proof that I hadn’t seen before. There are plenty of simpler compelling examples, such as proving that right(/left) adjoints are (co)continuous, and I regularly use representability in proofs I present on, e.g. the Math StackExchange.</p>
<h3 id="the-problem">The Problem</h3>
<p>An <a href="https://ncatlab.org/nlab/show/topos#ElementaryTopos">elementary topos</a>, |\mathcal E|, can be described as a category with finite limits and power objects. Having <a href="https://ncatlab.org/nlab/show/power+object">power objects</a> means having a functor |\mathsf P : \mathcal E^{op} \to \mathcal E| such that |\mathcal E(A,\mathsf PB) \cong \mathsf{Sub}(A \times B)| natural in |A| and |B| where |\mathsf{Sub}| is the (contravariant) functor that takes an object to its set of <a href="https://ncatlab.org/nlab/show/subobject">subobjects</a>. The action of |\mathsf{Sub}(f)| for an arrow |f : A \to B| is a function |m \mapsto f^*(m)| where |m| is a (representative) monomorphism and |f^*(m)| is the pullback of |f| along |m| which is a monomorphism by basic facts about pullbacks. In diagrammatic form: <br /><span class="math display">$$\require{AMScd}
\begin{CD}
f^{-1}(B') @&gt;f^\ast(m)&gt;&gt; A \\
@VVV @VVfV \\
B' @&gt;&gt;m&gt; B
\end{CD}$$</span><br /></p>
<p>This is a characterization of |\mathsf P| via representability. We are saying that |\mathsf PB| represents the functor |\mathsf{Sub}(- \times B)| parameterized in |B|.</p>
<p>A well-known and basic fact about elementary toposes is that they are <a href="https://ncatlab.org/nlab/show/cartesian+closed+category">cartesian closed</a>. (Indeed, finite limits + cartesian closure + a <a href="https://ncatlab.org/nlab/show/subobject+classifier">subobject classifier</a> is a common alternative definition.) Cartesian closure can be characterized as |\mathcal E(- \times A, B) \cong \mathcal E(-,B^A)| which characterizes the exponent, |B^A| via representability, namely that |B^A| represents the functor |\mathcal E(- \times A, B)| parameterized in |A|. Proving that elementary toposes are cartesian closed is not too difficult, but it is a bit fiddly. This is the example that I’m going to use.</p>
<h3 id="common-setup">Common Setup</h3>
<p>All the proofs I reference rely on the following basic facts about an elementary topos.</p>
<p>We have the monomorphism |\top : 1 \to \mathsf P1| induced by the identity arrow |\mathsf P1 \to \mathsf P1|.</p>
<p>We need the lemma that |\mathcal E(A \times B,PC) \cong \mathcal E(A,\mathsf P(B \times C))|. <strong>Proof</strong>: <br /><span class="math display">$$\begin{align}
\mathcal E(A \times B,\mathsf PC) \cong \mathsf{Sub}((A \times B) \times C) \cong \mathsf{Sub}(A \times (B \times C)) \cong \mathcal E(A,\mathsf P(B \times C))\ \square
\end{align}$$</span><br /></p>
<p>Since the arrow |\langle id_A, f\rangle : A \to A \times B| is a monomorphism for any arrow |f : A \to B|, the map |f \mapsto \langle id, f \rangle| is a map from |\mathcal E(-, B)| to |\mathsf{Sub}(- \times B)|. Using |\mathsf{Sub}(- \times B) \cong \mathcal E(-,\mathsf PB)|, we get a map |\mathcal E(-, B) \to \mathsf{Sub}(- \times B) \cong \mathcal E(-,\mathsf PB)|. By Yoneda, i.e. by evaluating it at |id|, we get the singleton map: |\{\}_B : B \to \mathsf PB|. If we can show that |\{\}| is a monomorphism, then, since |\mathsf PA \cong \mathsf P(A \times 1)|, we’ll get an arrow |\sigma : \mathsf PA \to \mathsf P1| such that</p>
<p><br /><span class="math display">$$\begin{CD}
A @&gt;\{\}_A&gt;&gt; \mathsf PA \\
@VVV @VV\sigma_AV \\
1 @&gt;&gt;\top&gt; \mathsf P1
\end{CD}$$</span><br /></p>
<p>is a pullback.</p>
<p>|\{\}_A| is a monomorphism because any |f, g : X \to A| gets mapped by the above to |\langle id_X, f\rangle| and |\langle id_X, g\rangle| which represent the same subobject when |\{\} \circ f = \{\} \circ g|. Therefore, there’s an isomorphism |j : X \cong X| such that |\langle id_X, f\rangle \circ j = \langle j, f \circ j\rangle = \langle id_X, g\rangle| but this means |j = id_X| and thus |f = g|.</p>
<h3 id="other-proofs">Other Proofs</h3>
<p>To restate the problem: given the above setup, we want to show that the elementary topos |\mathcal E| is cartesian closed.</p>
<p><a href="http://www.tac.mta.ca/tac/reprints/articles/12/tr12.pdf#page=170">Toposes, Triples, and Theories</a> by Barr and Wells actually provides <em>two</em> proofs of this statement: Theorem 4.1 of Chapter 5. The first proof is in exactly the representability-style approach I’m advocating, but it relies on earlier results about how a topos relates to its slice categories. The second proof is more concrete and direct, but it also involves |\mathsf P\mathsf P\mathsf P\mathsf P B|…</p>
<p><a href="https://doi.org/10.1007/978-1-4612-0927-0">Sheaves in Geometry and Logic</a> by Mac Lane and Moerdijk also has this result as Theorem 1 of section IV.2 “The Construction of Exponentials”. The proof starts on page 167 and finishes on 169. The idea is to take the set theoretic construction of functions via their graphs and interpret that into topos concepts. This proof involves a decent amount of equational reasoning (either via diagrams or via generalized elements).</p>
<h3 id="dans-proof-via-representability">Dan’s Proof via Representability</h3>
<p>Contrast these to Dan Doel’s proof<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a> using representability, which proceeds as follows. (Any mistakes are mine.)</p>
<p>Start with the pullback induced by the singleton map.</p>
<p><br /><span class="math display">$$\begin{CD}
B @&gt;\{\}_B&gt;&gt; \mathsf PB \\
@VVV @VV\sigma_BV \\
1 @&gt;&gt;\top&gt; \mathsf P1
\end{CD}$$</span><br /></p>
<p>Apply the functor |\mathcal E(= \times A,-)| which preserves the fact that it is a pullback via continuity. <br /><span class="math display">$$\begin{CD}
\mathcal{E}(-\times A,B) @&gt;&gt;&gt; \mathcal{E}(- \times A,\mathsf PB) \\
@VVV @VVV \\
\mathcal{E}(- \times A,1) @&gt;&gt;&gt; \mathcal{E}(- \times A,\mathsf P1)
\end{CD}$$</span><br /></p>
<p>Note:</p>
<ul>
<li>|\mathcal E(- \times A,1) \cong 1 \cong \mathcal E(-,1)| (by continuity)</li>
<li>|\mathcal E(- \times A,\mathsf PB) \cong \mathcal E(-,\mathsf P(A \times B))| (by definition of power objects)</li>
<li>|\mathcal E(- \times A,\mathsf P1) \cong \mathcal E(-,\mathsf PA)| (because |A \times 1 \cong A|)</li>
</ul>
<p>This means that the above pullback is also pullback of <br /><span class="math display">$$\begin{CD}
\mathcal E(-\times A,B) @&gt;&gt;&gt; \mathcal E(-,\mathsf P(A\times B)) \\
@VVV @VVV \\
\mathcal E(-,1) @&gt;&gt;&gt; \mathcal E(-,\mathsf PA)
\end{CD}$$</span><br /></p>
<p>Since |\mathcal E| has all finite limits, it has the following pullback</p>
<p><br /><span class="math display">$$\begin{CD}
X @&gt;&gt;&gt; \mathsf P(A \times B) \\
@VVV @VVV \\
1 @&gt;&gt;&gt; \mathsf PA
\end{CD}$$</span><br /></p>
<p>where the bottom and right arrows are induced by the corresponding arrows of the previous diagram by Yoneda. Applying |\mathcal E(=,-)| to this diagram gives another pullback diagram by continuity</p>
<p><br /><span class="math display">$$\begin{CD}
\mathcal E(-,X) @&gt;&gt;&gt; \mathcal E(-,\mathsf P(A\times B)) \\
@VVV @VVV \\
\mathcal E(-,1) @&gt;&gt;&gt; \mathcal E(-,\mathsf PA)
\end{CD}$$</span><br /></p>
<p>which is to say |\mathcal E(- \times A, B) \cong \mathcal E(-, X)| because pullbacks are unique up to isomorphism, so |X| satisfies the universal property of |B^A|, namely |\mathcal E(- \times A, B) \cong \mathcal E(-,B^A)|.</p>
<section class="footnotes" role="doc-endnotes">
<hr />
<ol>
<li id="fn1" role="doc-endnote"><p>Sent to me almost exactly three years ago.<a href="#fnref1" class="footnote-back" role="doc-backlink">↩︎</a></p></li>
</ol>
</section>
        
    </div>

    <div class="panel-footer">
        <h6 class="blog-post-meta">
            May  4, 2020 17:21 UTC
            
            (Last updated on May  5, 2020 22:25 UTC)

            
                Tags: <a title="All pages tagged 'math'." href="./tags/math.html">math</a>, <a title="All pages tagged 'category theory'." href="./tags/category%20theory.html">category theory</a>
            
        </h6>
    </div>

</div><!-- /.blog-post -->



    <div class="blog-post teaser panel panel-default">
    <div class="panel-heading">
        <h2 class="blog-post-title"><a href="./posts/recursive-helping.html">Recursive Helping</a></h2>
        <h6 class="pull-right" style="margin-top: -1.5ex"><a data-disqus-identifier="45e34423-669d-4d74-9744-2532cb1aaca0" href="./posts/recursive-helping.html#disqus_thread"></a></h6>
    </div>

    <div class="panel-body">
        
            <h2 id="introduction">Introduction</h2>
<p>Recursive helping is a technique for implementing lock-free concurrent data structures and algorithms. I’m going to illustrate this in the case of implementing a multi-variable compare-and-swap (MCAS) in terms of a single variable compare-and-swap. Basically everything I’m going to talk about comes from Keir Fraser’s PhD Thesis, <a href="https://www.cl.cam.ac.uk/techreports/UCAM-CL-TR-579.html">Practical Lock-Freedom</a> (2004) which I <strong>strongly</strong> recommend. Fraser’s thesis goes much further than this, e.g. fine-grained lock-free implementations of software transactional memory (STM)<a href="#fn1" class="footnote-ref" id="fnref1" role="doc-noteref"><sup>1</sup></a>. Fraser went on to contribute to the initial implementations of STM in Haskell, though his thesis uses C++.</p>

            <h6><a href="./posts/recursive-helping.html">Read more...</a></h6>
        
    </div>

    <div class="panel-footer">
        <h6 class="blog-post-meta">
            April 30, 2020 06:06 UTC
            
            (Last updated on April 30, 2020 06:07 UTC)

            
                Tags: <a title="All pages tagged 'programming'." href="./tags/programming.html">programming</a>, <a title="All pages tagged 'concurrency'." href="./tags/concurrency.html">concurrency</a>
            
        </h6>
    </div>

</div><!-- /.blog-post -->



    <div class="blog-post teaser panel panel-default">
    <div class="panel-heading">
        <h2 class="blog-post-title"><a href="./posts/beck-chevalley.html">Beck-Chevalley</a></h2>
        <h6 class="pull-right" style="margin-top: -1.5ex"><a data-disqus-identifier="a9d4a228-c165-4744-9421-1dca09ac596d" href="./posts/beck-chevalley.html#disqus_thread"></a></h6>
    </div>

    <div class="panel-body">
        
            <p>This is a fairly technical article. This article will most likely not have any significance for you if you haven’t heard of the Beck-Chevalley condition before.</p>
<h2 id="introduction">Introduction</h2>
<p>When one talks about “indexed (co)products” in an indexed category, it is often described as follows:</p>
<p>Let |\mathcal C| be an <a href="https://ncatlab.org/nlab/show/indexed+category"><strong>|\mathbf S|-indexed category</strong></a>, i.e. a <a href="https://ncatlab.org/nlab/show/pseudofunctor">pseudofunctor</a> |\mathbf S^{op} \to \mathbf{Cat}| where |\mathbf S| is an ordinary category. Write |\mathcal C^I| for |\mathcal C(I)| and |f^* : \mathcal C^J \to \mathcal C^I| for |\mathcal C(f)| where |f : I \to J|. The functors |f^*| will be called <strong>reindexing functors</strong>. |\mathcal C| has <strong>|\mathbf S|-indexed coproducts</strong> whenever</p>
<ol type="1">
<li>each reindexing functor |f^*| has a left adjoint |\Sigma_f|, and</li>
<li>the Beck-Chevalley condition holds, i.e. whenever <br /><span class="math display">$$\require{AMScd}\begin{CD}
   I @&gt;h&gt;&gt; J \\
   @VkVV @VVfV \\
   K @&gt;&gt;g&gt; L
\end{CD}$$</span><br /> is a pullback square in |\mathbf S|, then the canonical morphism |\Sigma_k \circ h^* \to g^* \circ \Sigma_f| is an isomorphism.</li>
</ol>
<p>The first condition is reasonable, especially motivated with some examples, but the second condition is more mysterious. It’s clear that you’d need <em>something</em> more than simply a family of adjunctions, but it’s not clear how you could calculate the particular condition quoted. That’s the goal of this article. I will not cover what the Beck-Chevalley condition is intuitively saying. I cover that in <a href="https://math.stackexchange.com/a/2203383">this Stack Exchange answer</a> from a logical perspective, though there are definitely other possible perspectives as well.</p>
<p>Some questions are:</p>
<ol type="1">
<li>Where does the Beck-Chevalley condition come from?</li>
<li>What is this “canonical morphism”?</li>
<li>Why do we care about pullback squares in particular?</li>
</ol>

            <h6><a href="./posts/beck-chevalley.html">Read more...</a></h6>
        
    </div>

    <div class="panel-footer">
        <h6 class="blog-post-meta">
            February 23, 2020 07:59 UTC
            
            (Last updated on February 23, 2020 07:59 UTC)

            
                Tags: <a title="All pages tagged 'math'." href="./tags/math.html">math</a>, <a title="All pages tagged 'category theory'." href="./tags/category%20theory.html">category theory</a>
            
        </h6>
    </div>

</div><!-- /.blog-post -->



    <div class="blog-post teaser panel panel-default">
    <div class="panel-heading">
        <h2 class="blog-post-title"><a href="./posts/absolute-colimits.html">Absolute Colimits</a></h2>
        <h6 class="pull-right" style="margin-top: -1.5ex"><a data-disqus-identifier="c2e1db83-0e86-4416-8d4e-b072ca537560" href="./posts/absolute-colimits.html#disqus_thread"></a></h6>
    </div>

    <div class="panel-body">
        
            <p>In category theory a concept is called <strong>absolute</strong> if it is preserved by <em>all</em> functors. Identity arrows and composition are absolute by the definition of functor. Less trivially, isomorphisms are absolute. In general, anything that is described by a diagram commuting is absolute as that diagram will be preserved by any functor. This is generally the case, but if I tell you something is an absolute epimorphism, it’s not clear what diagram is causing that; the notion of epimorphism itself doesn’t reduce to the commutativity of a particular diagram.</p>
<p>Below I’ll be focused primarily on <a href="https://ncatlab.org/nlab/show/absolute+colimit">absolute colimits</a> as those are the most commonly used examples. They are an important part of the theory of <a href="https://ncatlab.org/nlab/show/monadicity+theorem">monadicity</a>. The trick to many questions about absolute colimits and related concepts is to see what it means for |\newcommand{\Set}{\mathbf{Set}}\newcommand{\Hom}{\mathsf{Hom}} \newcommand{onto}{\twoheadrightarrow}\Hom| functors to preserve them.</p>

            <h6><a href="./posts/absolute-colimits.html">Read more...</a></h6>
        
    </div>

    <div class="panel-footer">
        <h6 class="blog-post-meta">
            May 18, 2019 23:59 UTC
            
            (Last updated on January  5, 2020 01:54 UTC)

            
                Tags: <a title="All pages tagged 'math'." href="./tags/math.html">math</a>, <a title="All pages tagged 'category theory'." href="./tags/category%20theory.html">category theory</a>
            
        </h6>
    </div>

</div><!-- /.blog-post -->



    <div class="blog-post teaser panel panel-default">
    <div class="panel-heading">
        <h2 class="blog-post-title"><a href="./posts/finite.html">Finite</a></h2>
        <h6 class="pull-right" style="margin-top: -1.5ex"><a data-disqus-identifier="0b86a098-b8c4-47aa-bc63-ef7cfa0681cf" href="./posts/finite.html#disqus_thread"></a></h6>
    </div>

    <div class="panel-body">
        
            <h3 id="introduction">Introduction</h3>
<p>When sets are first introduced to students, usually examples are used with finite, explicitly presented sets. For example, #{1,2,3} uu {2,3,4} = {1,2,3,4}#. This is the beginning of the idea that a set is a “collection” of things. Later, when infinite sets are introduced, the idea that sets are “collections” of things is still commonly used as the intuitive basis for the definitions. While I personally find this a bit of a philosophical bait-and-switch, my main issue with it is that I don’t think it does a good job reflecting how we work with sets day-to-day nor for more in-depth set-theoretic investigations. Instead, I recommend thinking about infinite sets as defined by properties and #x in X# for some infinite set #X# means checking whether it satisfies the property defining #X#, <em>not</em> rummaging through the infinite elements that make up #X# and seeing if #x# is amongst them. This perspective closely reflects how we prove things about infinite sets. It makes it much clearer that the job is to find logical relationships between the properties that define sets.</p>
<p>Of course, this view can also be applied to finite sets and <em>should</em> be applied to them. For a constructivist, the notion of “finite set” splits into multiple inequivalent notions, and it is quite easy to show that there is a subset of #{0,1}# which is not “finite” with respect to strong notions of “finite” that are commonly used by constructivists. Today, though, I’ll stick with classical logic and classical set theory. In particular, I’m going to talk about the <a href="https://en.wikipedia.org/wiki/Internal_set_theory">Internal Set Theory</a> of Edward Nelson, or mostly the small fragment he used in <a href="https://web.math.princeton.edu/~nelson/books/rept.pdf">Radically Elementary Probability Theory</a>. In the <a href="https://web.math.princeton.edu/~nelson/books/1.pdf">first chapter of an unfinished book on Internal Set Theory</a>, he states the following:</p>
<blockquote>
<p>Perhaps it is fair to say that “finite” does not mean what we have always thought it to mean. What have we always thought it to mean? I used to think that I knew what I had always thought it to mean, but I no longer think so.</p>
</blockquote>
<p>While it may be a bit strong to say that Internal Set Theory leads to some question about what “finite” means, I think it makes a good case for questioning what “finite set” means. These concerns are similar to the relativity of the notion of “(un)countable set”.</p>

            <h6><a href="./posts/finite.html">Read more...</a></h6>
        
    </div>

    <div class="panel-footer">
        <h6 class="blog-post-meta">
            March 26, 2018 07:57 UTC
            
            (Last updated on August 24, 2019 21:37 UTC)

            
                Tags: <a title="All pages tagged 'math'." href="./tags/math.html">math</a>, <a title="All pages tagged 'logic'." href="./tags/logic.html">logic</a>
            
        </h6>
    </div>

</div><!-- /.blog-post -->



    <div class="blog-post teaser panel panel-default">
    <div class="panel-heading">
        <h2 class="blog-post-title"><a href="./posts/the-pedagogy-of-logic-a-rant.html">The Pedagogy of Logic: A Rant</a></h2>
        <h6 class="pull-right" style="margin-top: -1.5ex"><a data-disqus-identifier="5c9fe83f-9bc9-4523-9353-e3456a5a1795" href="./posts/the-pedagogy-of-logic-a-rant.html#disqus_thread"></a></h6>
    </div>

    <div class="panel-body">
        
            <h3 id="introduction">Introduction</h3>
<p>Over the years I’ve seen a lot of confusion about formal logic online. Usually this is from students (but I’ve also seen it with experienced mathematicians) on platforms like the Math or CS StackExchange. Now there is clearly some selection bias where the people asking the questions are the people who are confused, but while the questions <em>about</em> the confusions are common, the confusions are often evident even in questions about other aspects, the confusions are <em>in the (upvoted!) answers</em>, and when you look at the study material they are using it is often completely unsurprising that they are confused. Again, these confusions are also not limited to just “students”, though I’ll use that word in a broad sense below. Finally, on at least one of the points below, the confusion seems to be entirely on the instructors’ side.</p>
<p>An indication that this is true more broadly is this quote from the <a href="http://ncatlab.org/nlab/revision/constructive%20mathematics/64">nLab</a>:</p>
<blockquote>
<p>The distinction between object language and metalanguage exists even in classical mathematics, but it seems that most classical mathematicians are not used to remembering it, although it is not entirely clear why this should be so. One possibly relevant observation is that even if <span class="math inline"><em>P</em></span> is a statement which is neither provable nor disprovable (like the continuum hypothesis), in classical mathematics it is still provable that “<span class="math inline"><em>P</em></span> is either true or false.” Moreover, classical model theory often restricts itself to two-valued models in which the only truth values are “true” and “false,” although classical logic still holds in Boolean-valued models, and in such a case the truth value of <span class="math inline"><em>P</em></span> may be neither “true” nor “false,” although the truth value of “<span class="math inline"><em>P</em></span> or not <span class="math inline"><em>P</em></span>” is still “true.” Certainly when talking about classical truths which fail constructively, such as excluded middle, it is important to remember that “fails to be provable” is different from “is provably false.”</p>
</blockquote>
<p>To give an indication of the problem, here is my strong impression of what would happen if I gave a student who had just passed a full year introduction to formal logic the following exercise: “Give me a formal proof of #(neg P =&gt; neg Q) =&gt; (Q =&gt; P)#”. I suspect most would draw up a truth table. When I responded, “that’s not a formal proof,” they would be confused. If you are confused by that response, then this is definitely for you. I’m sure they would completely agree with me that if I asked for the inverse matrix of some matrix #M#, showing that the determinant of #M# is non-zero does not constitute an answer to that question. The parallelism of these scenarios would likely be lost on them though. While I think courses that focus on a syntactic approach to logic will produce students that are much more likely to give an appropriate answer to my exercise, that doesn’t mean they lack the confusions, just that this exercise isn’t a good discriminator for them. For example, if they don’t see the parallelism of the two scenarios I described, or worse, have no idea what truth tables have to do with anything, then they have some gap.</p>
<p>As a disclaimer, I am not an educator nor even an academic in any professional capacity.</p>
<p>As a summary, the points I will touch on are:</p>
<ul>
<li><a href="#syntax-versus-semantics">Not <em>continually</em> emphasizing the distinction between syntax and semantics</a>.</li>
<li><a href="#unnecessary-philosophizing">Unnecessary philosophizing</a>.</li>
<li><a href="#the-complete-absence-of-non-classical-logics">The complete absence of non-classical logics</a>.</li>
<li><a href="#silly-linguistics">Silly linguistics exercises</a>.</li>
<li><a href="#the-complete-conflation-of-negation-introduction-with-double-negation-elimination">The complete conflation of negation introduction with double negation elimination</a>.</li>
<li><a href="#overuse-of-indirect-proof">Overuse of indirect proof</a>.</li>
<li><a href="#smaller-issues">Some smaller issues that are not so bad and some missed opportunities</a>.</li>
</ul>
<p>If anyone reading this is aware of <em>introductory</em> textbooks or other resources (ideally freely available, but I’ll take a reasonably priced textbook too) that avoid most or all of the major issues I list and otherwise do a good job, I would be very interested. My own education on these topics has been piecemeal and eclectic and also strongly dependent on my background in programming. This leaves me with no reasonable recommendations. Please leave a comment or email me, if you have such a recommendation.</p>

            <h6><a href="./posts/the-pedagogy-of-logic-a-rant.html">Read more...</a></h6>
        
    </div>

    <div class="panel-footer">
        <h6 class="blog-post-meta">
            March  1, 2018 04:35 UTC
            
            (Last updated on August 24, 2019 21:37 UTC)

            
                Tags: <a title="All pages tagged 'math'." href="./tags/math.html">math</a>, <a title="All pages tagged 'logic'." href="./tags/logic.html">logic</a>
            
        </h6>
    </div>

</div><!-- /.blog-post -->



    <div class="blog-post teaser panel panel-default">
    <div class="panel-heading">
        <h2 class="blog-post-title"><a href="./posts/djinn.html">Djinn in your browser</a></h2>
        <h6 class="pull-right" style="margin-top: -1.5ex"><a data-disqus-identifier="83a60c76-d78b-4fb4-8bfc-f21d55a2e378" href="./posts/djinn.html#disqus_thread"></a></h6>
    </div>

    <div class="panel-body">
        
            <p>I couldn’t find an online version of Djinn, so I ran it through GHCJS with some tweaks, added a basic interface and hosted it <a href="./djinn/">here</a>. It runs in your browser, so go crazy. If you want changes to the default settings or environment, feel free to suggest them. Right now everything is the default settings of the Djinn tool except that multiple results is enabled.</p>
        
    </div>

    <div class="panel-footer">
        <h6 class="blog-post-meta">
            April  9, 2017 12:35 UTC
            
            (Last updated on August 24, 2019 21:37 UTC)

            
                Tags: 
            
        </h6>
    </div>

</div><!-- /.blog-post -->



    <div class="blog-post teaser panel panel-default">
    <div class="panel-heading">
        <h2 class="blog-post-title"><a href="./posts/category-theory-syntactically.html">Category Theory, Syntactically</a></h2>
        <h6 class="pull-right" style="margin-top: -1.5ex"><a data-disqus-identifier="5E75F45D-41BB-4B55-B0ED-BF6D46230139" href="./posts/category-theory-syntactically.html#disqus_thread"></a></h6>
    </div>

    <div class="panel-body">
        
            <h4 id="or-how-model-theory-got-scooped-by-category-theory">(or: How Model Theory Got Scooped by Category Theory)</h4>
<h2 id="overview">Overview</h2>
<p>This will be a <em>very</em> non-traditional introduction to the ideas behind category theory. It will essentially be a slice through model theory (presented in a more programmer-friendly manner) with an unusual organization. Of course the end result will be <strong>***SPOILER ALERT***</strong> it was category theory all along. A secret decoder ring will be provided at the end. This approach is inspired by the notion of an internal logic/language and by Vaughn Pratt’s paper <a href="http://boole.stanford.edu/pub/yon.pdf">The Yoneda Lemma Without Category Theory</a>. <!-- \* --></p>
<p>I want to be very clear, though. This is not meant to be an analogy or an example or a guide for intuition. This <em>is</em> category theory. It is simply presented in a different manner.</p>
<p>Dan Doel pointed me at some draft lecture notes by Mike Shulman that seem very much in the spirit of this blog post (albeit aimed at an audience familiar with category theory): <a href="https://mikeshulman.github.io/catlog/catlog.pdf">Categorical Logic from a Categorical Point of View</a>. A theory in my sense corresponds to a category presentation (Definition 1.7.1) as defined by these lecture notes. Its oft-mentioned Appendix A will also look very familiar.</p>

            <h6><a href="./posts/category-theory-syntactically.html">Read more...</a></h6>
        
    </div>

    <div class="panel-footer">
        <h6 class="blog-post-meta">
            November 25, 2016 06:23 UTC
            
            (Last updated on August 24, 2019 21:37 UTC)

            
                Tags: <a title="All pages tagged 'programming'." href="./tags/programming.html">programming</a>, <a title="All pages tagged 'math'." href="./tags/math.html">math</a>, <a title="All pages tagged 'category theory'." href="./tags/category%20theory.html">category theory</a>
            
        </h6>
    </div>

</div><!-- /.blog-post -->



    <div class="blog-post teaser panel panel-default">
    <div class="panel-heading">
        <h2 class="blog-post-title"><a href="./posts/find-first-set.html">Constant-time Binary Logarithm</a></h2>
        <h6 class="pull-right" style="margin-top: -1.5ex"><a data-disqus-identifier="c90916eb-ab11-4a1f-a1cf-ee18952fffef" href="./posts/find-first-set.html#disqus_thread"></a></h6>
    </div>

    <div class="panel-body">
        
            <h2 id="introduction">Introduction</h2>
<p>I’ve been watching the <a href="https://courses.csail.mit.edu/6.851/spring14/lectures/">Spring 2012 lectures for MIT 6.851 Advanced Data Structures</a> with Prof. Erik Demaine. In lecture 12, “Fusion Trees”, it mentions a constant time algorithm for finding the index of the first most significant 1 bit in a word, i.e. the binary logarithm. Assuming word operations are constant time, i.e. in the Word RAM model, the below algorithm takes 27 word operations (not counting copying). When I compiled it with GHC 8.0.1 -O2 the core of the algorithm was 44 straight-line instructions. The theoretically interesting thing is, other than changing the constants, the same algorithm works for any word size that’s an even power of 2. Odd powers of two need a slight tweak. This is demonstrated for <code>Word64</code>, <code>Word32</code>, and <code>Word16</code>. It should be possible to do this for any arbitrary word size <code>w</code>.</p>
<p>The <code>clz</code> instruction <a href="https://hackage.haskell.org/package/base-4.8.2.0/docs/Data-Bits.html#v:countLeadingZeros">can be used to implement</a> this function, but this is a potential simulation if that or a similar instruction wasn’t available. It’s probably not the fastest way. Similarly, find first set and count trailing zeros <a href="https://en.wikipedia.org/wiki/Find_first_set">can be implemented</a> in terms of this operation.</p>
<h2 id="code">Code</h2>
<p>Below is the complete code. You can also download it <a href="./posts/raw/FFS.hs">here</a>.</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode haskell"><code class="sourceCode haskell"><span id="cb1-1"><a href="#cb1-1"></a><span class="ot">{-# LANGUAGE BangPatterns #-}</span></span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="kw">import</span> <span class="dt">Data.Word</span></span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="kw">import</span> <span class="dt">Data.Bits</span></span>
<span id="cb1-4"><a href="#cb1-4"></a></span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="co">-- Returns 0-based bit index of most significant bit that is 1. Assumes input is non-zero.</span></span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="co">-- That is, 2^indexOfMostSignificant1 x &lt;= x &lt; 2^(indexOfMostSignificant1 x + 1)</span></span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="co">-- From Erik Demaine's presentation in Spring 2012 lectures of MIT 6.851, particularly &quot;Lecture 12: Fusion Trees&quot;.</span></span>
<span id="cb1-8"><a href="#cb1-8"></a><span class="co">-- Takes 26 (source-level) straight-line word operations.</span></span>
<span id="cb1-9"><a href="#cb1-9"></a><span class="ot">indexOfMostSignificant1 ::</span> <span class="dt">Word64</span> <span class="ot">-&gt;</span> <span class="dt">Word64</span></span>
<span id="cb1-10"><a href="#cb1-10"></a>indexOfMostSignificant1 w <span class="ot">=</span> idxMsbyte <span class="op">.|.</span> idxMsbit</span>
<span id="cb1-11"><a href="#cb1-11"></a>    <span class="kw">where</span></span>
<span id="cb1-12"><a href="#cb1-12"></a>        <span class="co">-- top bits of each byte</span></span>
<span id="cb1-13"><a href="#cb1-13"></a>        <span class="op">!</span>wtbs <span class="ot">=</span> w <span class="op">.&amp;.</span> <span class="bn">0x8080808080808080</span></span>
<span id="cb1-14"><a href="#cb1-14"></a>        </span>
<span id="cb1-15"><a href="#cb1-15"></a>        <span class="co">-- all but top bits of each byte producing 8 7-bit chunks</span></span>
<span id="cb1-16"><a href="#cb1-16"></a>        <span class="op">!</span>wbbs <span class="ot">=</span> w <span class="op">.&amp;.</span> <span class="bn">0x7F7F7F7F7F7F7F7F</span>              </span>
<span id="cb1-17"><a href="#cb1-17"></a></span>
<span id="cb1-18"><a href="#cb1-18"></a>        <span class="co">-- parallel compare of each 7-bit chunk to 0, top bit set in result if 7-bit chunk was not 0</span></span>
<span id="cb1-19"><a href="#cb1-19"></a>        <span class="op">!</span>pc <span class="ot">=</span> parallelCompare <span class="bn">0x8080808080808080</span> wbbs</span>
<span id="cb1-20"><a href="#cb1-20"></a></span>
<span id="cb1-21"><a href="#cb1-21"></a>        <span class="co">-- top bit of each byte set if the byte has any bits set in w</span></span>
<span id="cb1-22"><a href="#cb1-22"></a>        <span class="op">!</span>ne <span class="ot">=</span> wtbs <span class="op">.|.</span> pc                             </span>
<span id="cb1-23"><a href="#cb1-23"></a></span>
<span id="cb1-24"><a href="#cb1-24"></a>        <span class="co">-- a summary of which bytes (except the first) are non-zero as a 7-bit bitfield, i.e. top bits collected into bottom byte</span></span>
<span id="cb1-25"><a href="#cb1-25"></a>        <span class="op">!</span>summary <span class="ot">=</span> sketch ne <span class="ot">`unsafeShiftR`</span> <span class="dv">1</span></span>
<span id="cb1-26"><a href="#cb1-26"></a></span>
<span id="cb1-27"><a href="#cb1-27"></a>        <span class="co">-- parallel compare summary to powers of two</span></span>
<span id="cb1-28"><a href="#cb1-28"></a>        <span class="op">!</span>cmpp2 <span class="ot">=</span> parallelCompare <span class="bn">0xFFBF9F8F87838180</span> (<span class="bn">0x0101010101010101</span> <span class="op">*</span> summary)</span>
<span id="cb1-29"><a href="#cb1-29"></a>        </span>
<span id="cb1-30"><a href="#cb1-30"></a>        <span class="co">-- index of most significant non-zero byte * 8</span></span>
<span id="cb1-31"><a href="#cb1-31"></a>        <span class="op">!</span>idxMsbyte <span class="ot">=</span> sumTopBits8 cmpp2                </span>
<span id="cb1-32"><a href="#cb1-32"></a></span>
<span id="cb1-33"><a href="#cb1-33"></a>        <span class="co">-- most significant 7-bits of most significant non-zero byte</span></span>
<span id="cb1-34"><a href="#cb1-34"></a>        <span class="op">!</span>msbyte <span class="ot">=</span> ((w <span class="ot">`unsafeShiftR`</span> (<span class="fu">fromIntegral</span> idxMsbyte)) <span class="op">.&amp;.</span> <span class="bn">0xFF</span>) <span class="ot">`unsafeShiftR`</span> <span class="dv">1</span></span>
<span id="cb1-35"><a href="#cb1-35"></a></span>
<span id="cb1-36"><a href="#cb1-36"></a>        <span class="co">-- parallel compare msbyte to powers of two</span></span>
<span id="cb1-37"><a href="#cb1-37"></a>        <span class="op">!</span>cmpp2' <span class="ot">=</span> parallelCompare <span class="bn">0xFFBF9F8F87838180</span> (<span class="bn">0x0101010101010101</span> <span class="op">*</span> msbyte)</span>
<span id="cb1-38"><a href="#cb1-38"></a></span>
<span id="cb1-39"><a href="#cb1-39"></a>        <span class="co">-- index of most significant non-zero bit in msbyte</span></span>
<span id="cb1-40"><a href="#cb1-40"></a>        <span class="op">!</span>idxMsbit <span class="ot">=</span> sumTopBits cmpp2' </span>
<span id="cb1-41"><a href="#cb1-41"></a></span>
<span id="cb1-42"><a href="#cb1-42"></a>        <span class="co">-- Maps top bits of each byte into lower byte assuming all other bits are 0.</span></span>
<span id="cb1-43"><a href="#cb1-43"></a>        <span class="co">-- 0x2040810204081 = sum [2^j | j &lt;- map (\i -&gt; 49 - 7*i) [0..7]]</span></span>
<span id="cb1-44"><a href="#cb1-44"></a>        <span class="co">-- In general if w = 2^(2*k+p) and p = 0 or 1 the formula is:</span></span>
<span id="cb1-45"><a href="#cb1-45"></a>        <span class="co">-- sum [2^j | j &lt;- map (\i -&gt; w-(2^k-1) - 2^(k+p) - (2^(k+p) - 1)*i) [0..2^k-1]]</span></span>
<span id="cb1-46"><a href="#cb1-46"></a>        <span class="co">-- Followed by shifting right by w - 2^k</span></span>
<span id="cb1-47"><a href="#cb1-47"></a>        sketch w <span class="ot">=</span> (w <span class="op">*</span> <span class="bn">0x2040810204081</span>) <span class="ot">`unsafeShiftR`</span> <span class="dv">56</span></span>
<span id="cb1-48"><a href="#cb1-48"></a></span>
<span id="cb1-49"><a href="#cb1-49"></a>        parallelCompare w1 w2 <span class="ot">=</span> complement (w1 <span class="op">-</span> w2) <span class="op">.&amp;.</span> <span class="bn">0x8080808080808080</span></span>
<span id="cb1-50"><a href="#cb1-50"></a>        sumTopBits w <span class="ot">=</span> ((w <span class="ot">`unsafeShiftR`</span> <span class="dv">7</span>) <span class="op">*</span> <span class="bn">0x0101010101010101</span>) <span class="ot">`unsafeShiftR`</span> <span class="dv">56</span></span>
<span id="cb1-51"><a href="#cb1-51"></a>        sumTopBits8 w <span class="ot">=</span> ((w <span class="ot">`unsafeShiftR`</span> <span class="dv">7</span>) <span class="op">*</span> <span class="bn">0x0808080808080808</span>) <span class="ot">`unsafeShiftR`</span> <span class="dv">56</span></span>
<span id="cb1-52"><a href="#cb1-52"></a></span>
<span id="cb1-53"><a href="#cb1-53"></a><span class="ot">indexOfMostSignificant1_w32 ::</span> <span class="dt">Word32</span> <span class="ot">-&gt;</span> <span class="dt">Word32</span></span>
<span id="cb1-54"><a href="#cb1-54"></a>indexOfMostSignificant1_w32 w <span class="ot">=</span> idxMsbyte <span class="op">.|.</span> idxMsbit</span>
<span id="cb1-55"><a href="#cb1-55"></a>    <span class="kw">where</span> <span class="op">!</span>wtbs <span class="ot">=</span> w <span class="op">.&amp;.</span> <span class="bn">0x80808080</span></span>
<span id="cb1-56"><a href="#cb1-56"></a>          <span class="op">!</span>wbbs <span class="ot">=</span> w <span class="op">.&amp;.</span> <span class="bn">0x7F7F7F7F</span></span>
<span id="cb1-57"><a href="#cb1-57"></a>          <span class="op">!</span>pc <span class="ot">=</span> parallelCompare <span class="bn">0x80808080</span> wbbs</span>
<span id="cb1-58"><a href="#cb1-58"></a>          <span class="op">!</span>ne <span class="ot">=</span> wtbs <span class="op">.|.</span> pc</span>
<span id="cb1-59"><a href="#cb1-59"></a>          <span class="op">!</span>summary <span class="ot">=</span> sketch ne <span class="ot">`unsafeShiftR`</span> <span class="dv">1</span></span>
<span id="cb1-60"><a href="#cb1-60"></a>          <span class="op">!</span>cmpp2 <span class="ot">=</span> parallelCompare <span class="bn">0xFF838180</span> (<span class="bn">0x01010101</span> <span class="op">*</span> summary)</span>
<span id="cb1-61"><a href="#cb1-61"></a>          <span class="op">!</span>idxMsbyte <span class="ot">=</span> sumTopBits8 cmpp2</span>
<span id="cb1-62"><a href="#cb1-62"></a>          <span class="op">!</span>msbyte <span class="ot">=</span> ((w <span class="ot">`unsafeShiftR`</span> (<span class="fu">fromIntegral</span> idxMsbyte)) <span class="op">.&amp;.</span> <span class="bn">0xFF</span>) <span class="ot">`unsafeShiftR`</span> <span class="dv">1</span></span>
<span id="cb1-63"><a href="#cb1-63"></a>          <span class="op">!</span>cmpp2' <span class="ot">=</span> parallelCompare <span class="bn">0x87838180</span> (<span class="bn">0x01010101</span> <span class="op">*</span> msbyte)</span>
<span id="cb1-64"><a href="#cb1-64"></a></span>
<span id="cb1-65"><a href="#cb1-65"></a>          <span class="co">-- extra step when w is not an even power of two</span></span>
<span id="cb1-66"><a href="#cb1-66"></a>          <span class="op">!</span>cmpp2'' <span class="ot">=</span> parallelCompare <span class="bn">0xFFBF9F8F</span> (<span class="bn">0x01010101</span> <span class="op">*</span> msbyte)</span>
<span id="cb1-67"><a href="#cb1-67"></a>          <span class="op">!</span>idxMsbit <span class="ot">=</span> sumTopBits cmpp2' <span class="op">+</span> sumTopBits cmpp2''</span>
<span id="cb1-68"><a href="#cb1-68"></a></span>
<span id="cb1-69"><a href="#cb1-69"></a>          sketch w <span class="ot">=</span> (w <span class="op">*</span> <span class="bn">0x204081</span>) <span class="ot">`unsafeShiftR`</span> <span class="dv">28</span></span>
<span id="cb1-70"><a href="#cb1-70"></a>          parallelCompare w1 w2 <span class="ot">=</span> complement (w1 <span class="op">-</span> w2) <span class="op">.&amp;.</span> <span class="bn">0x80808080</span></span>
<span id="cb1-71"><a href="#cb1-71"></a>          sumTopBits w <span class="ot">=</span> ((w <span class="ot">`unsafeShiftR`</span> <span class="dv">7</span>) <span class="op">*</span> <span class="bn">0x01010101</span>) <span class="ot">`unsafeShiftR`</span> <span class="dv">24</span></span>
<span id="cb1-72"><a href="#cb1-72"></a>          sumTopBits8 w <span class="ot">=</span> ((w <span class="ot">`unsafeShiftR`</span> <span class="dv">7</span>) <span class="op">*</span> <span class="bn">0x08080808</span>) <span class="ot">`unsafeShiftR`</span> <span class="dv">24</span></span>
<span id="cb1-73"><a href="#cb1-73"></a></span>
<span id="cb1-74"><a href="#cb1-74"></a><span class="ot">indexOfMostSignificant1_w16 ::</span> <span class="dt">Word16</span> <span class="ot">-&gt;</span> <span class="dt">Word16</span></span>
<span id="cb1-75"><a href="#cb1-75"></a>indexOfMostSignificant1_w16 w <span class="ot">=</span> idxMsnibble <span class="op">.|.</span> idxMsbit</span>
<span id="cb1-76"><a href="#cb1-76"></a>    <span class="kw">where</span> <span class="op">!</span>wtbs <span class="ot">=</span> w <span class="op">.&amp;.</span> <span class="bn">0x8888</span></span>
<span id="cb1-77"><a href="#cb1-77"></a>          <span class="op">!</span>wbbs <span class="ot">=</span> w <span class="op">.&amp;.</span> <span class="bn">0x7777</span></span>
<span id="cb1-78"><a href="#cb1-78"></a>          <span class="op">!</span>pc <span class="ot">=</span> parallelCompare <span class="bn">0x8888</span> wbbs</span>
<span id="cb1-79"><a href="#cb1-79"></a>          <span class="op">!</span>ne <span class="ot">=</span> wtbs <span class="op">.|.</span> pc</span>
<span id="cb1-80"><a href="#cb1-80"></a>          <span class="op">!</span>summary <span class="ot">=</span> sketch ne <span class="ot">`unsafeShiftR`</span> <span class="dv">1</span></span>
<span id="cb1-81"><a href="#cb1-81"></a>          <span class="op">!</span>cmpp2 <span class="ot">=</span> parallelCompare <span class="bn">0xFB98</span> (<span class="bn">0x1111</span> <span class="op">*</span> summary)</span>
<span id="cb1-82"><a href="#cb1-82"></a>          <span class="op">!</span>idxMsnibble <span class="ot">=</span> sumTopBits4 cmpp2</span>
<span id="cb1-83"><a href="#cb1-83"></a>          <span class="op">!</span>msnibble <span class="ot">=</span> ((w <span class="ot">`unsafeShiftR`</span> (<span class="fu">fromIntegral</span> idxMsnibble)) <span class="op">.&amp;.</span> <span class="bn">0xF</span>) <span class="ot">`unsafeShiftR`</span> <span class="dv">1</span></span>
<span id="cb1-84"><a href="#cb1-84"></a>          <span class="op">!</span>cmpp2' <span class="ot">=</span> parallelCompare <span class="bn">0xFB98</span> (<span class="bn">0x1111</span> <span class="op">*</span> msnibble)</span>
<span id="cb1-85"><a href="#cb1-85"></a>          <span class="op">!</span>idxMsbit <span class="ot">=</span> sumTopBits cmpp2'</span>
<span id="cb1-86"><a href="#cb1-86"></a></span>
<span id="cb1-87"><a href="#cb1-87"></a>          sketch w <span class="ot">=</span> (w <span class="op">*</span> <span class="bn">0x249</span>) <span class="ot">`unsafeShiftR`</span> <span class="dv">12</span></span>
<span id="cb1-88"><a href="#cb1-88"></a>          parallelCompare w1 w2 <span class="ot">=</span> complement (w1 <span class="op">-</span> w2) <span class="op">.&amp;.</span> <span class="bn">0x8888</span></span>
<span id="cb1-89"><a href="#cb1-89"></a>          sumTopBits w <span class="ot">=</span> ((w <span class="ot">`unsafeShiftR`</span> <span class="dv">3</span>) <span class="op">*</span> <span class="bn">0x1111</span>) <span class="ot">`unsafeShiftR`</span> <span class="dv">12</span></span>
<span id="cb1-90"><a href="#cb1-90"></a>          sumTopBits4 w <span class="ot">=</span> ((w <span class="ot">`unsafeShiftR`</span> <span class="dv">3</span>) <span class="op">*</span> <span class="bn">0x4444</span>) <span class="ot">`unsafeShiftR`</span> <span class="dv">12</span></span></code></pre></div>
        
    </div>

    <div class="panel-footer">
        <h6 class="blog-post-meta">
            November 10, 2016 07:48 UTC
            
            (Last updated on August 24, 2019 21:37 UTC)

            
                Tags: <a title="All pages tagged 'programming'." href="./tags/programming.html">programming</a>, <a title="All pages tagged 'CS'." href="./tags/CS.html">CS</a>
            
        </h6>
    </div>

</div><!-- /.blog-post -->




        </div><!-- /.blog-main -->
        
            <div class="col-sm-3 col-sm-offset-1 blog-sidebar">
              
              <div class="sidebar-module panel panel-default" style="padding: 0;">
                <div class="panel-heading"><h4>Recent</h4></div>
                <div class="panel-body">
                    <ol class="list-unstyled">
                        
                          <li><div class="blog-post-link">2020-05-22 - <a href="./posts/internal-language-of-a-monoidal-category.html">Internal Language of a Monoidal Category</a></div></li>
                        
                          <li><div class="blog-post-link">2020-05-04 - <a href="./posts/example-representability-argument.html">Example Representability Argument</a></div></li>
                        
                          <li><div class="blog-post-link">2020-04-30 - <a href="./posts/recursive-helping.html">Recursive Helping</a></div></li>
                        
                          <li><div class="blog-post-link">2020-02-23 - <a href="./posts/beck-chevalley.html">Beck-Chevalley</a></div></li>
                        
                          <li><div class="blog-post-link">2019-05-18 - <a href="./posts/absolute-colimits.html">Absolute Colimits</a></div></li>
                        
                          <li><div class="blog-post-link">2018-03-26 - <a href="./posts/finite.html">Finite</a></div></li>
                        
                          <li><div class="blog-post-link">2018-03-01 - <a href="./posts/the-pedagogy-of-logic-a-rant.html">The Pedagogy of Logic: A Rant</a></div></li>
                        
                          <li><div class="blog-post-link">2017-04-09 - <a href="./posts/djinn.html">Djinn in your browser</a></div></li>
                        
                          <li><div class="blog-post-link">2016-11-25 - <a href="./posts/category-theory-syntactically.html">Category Theory, Syntactically</a></div></li>
                        
                          <li><div class="blog-post-link">2016-11-10 - <a href="./posts/find-first-set.html">Constant-time Binary Logarithm</a></div></li>
                        
                    </ol>
                </div>
              </div>
              <div class="sidebar-module panel panel-default" style="padding: 0;">
                <div class="panel-heading"><h4>Tags</h4></div>
                <div class="panel-body">
                    <ol class="list-unstyled">
                      <li><a href="./tags/Agda.html">Agda (1)</a></li>
<li><a href="./tags/CS.html">CS (3)</a></li>
<li><a href="./tags/category%20theory.html">category theory (7)</a></li>
<li><a href="./tags/concurrency.html">concurrency (1)</a></li>
<li><a href="./tags/geometric%20algebra.html">geometric algebra (1)</a></li>
<li><a href="./tags/javascript.html">javascript (1)</a></li>
<li><a href="./tags/logic.html">logic (2)</a></li>
<li><a href="./tags/math.html">math (13)</a></li>
<li><a href="./tags/programming.html">programming (3)</a></li>
<li><a href="./tags/type%20theory.html">type theory (2)</a></li>
                    </ol>
                </div>
              </div>
            </div><!-- /.blog-sidebar -->
        
      </div><!-- /.row -->
    </div><!-- /.container -->

    <footer class="blog-footer">
      <p>Site generated by <a href="http://jaspervdj.be/hakyll">Hakyll</a></p>
      <p>
        <a href="#">Back to top</a>
      </p>
    </footer>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js" integrity="sha384-6ePHh72Rl3hKio4HiJ841psfsRJveeS+aLoaEf3BWfS+gTF0XdAqku2ka8VddikM" crossorigin="anonymous"></script>
    <!-- <script type="text/javascript" src="/js/jquery.min.js"></script> -->
    <script type="text/javascript" src="./js/bootstrap.min.js"></script>
    <!-- IE10 viewport hack for Surface/desktop Windows 8 bug -->
    <!--<script src="../../assets/js/ie10-viewport-bug-workaround.js"></script>-->
    <script type="text/javascript">
        var disqus_shortname = 'hedonisticlearning';
        (function () {
            var s = document.createElement('script'); s.async = true;
            s.type = 'text/javascript';
            s.src = 'https://' + disqus_shortname + '.disqus.com/count.js';
            (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
        }());
    </script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-MML-AM_HTMLorMML.js" integrity="sha384-crwIf/BuaWM9rM65iM+dWFldgQ1Un8jWZMuh3puxb8TOY9+linwLoI7ZHZT+aekW" crossorigin="anonymous"></script>
    <!-- <script type="text/javascript" src="/js/MathJax-2.7.7/MathJax.js?config=TeX-MML-AM_HTMLorMML"></script> -->
    <script type="text/x-mathjax-config">
        MathJax.Hub.Config({
          extensions: ['asciimath2jax.js'],
          asciimath2jax: {
              delimiters: [['#','#']],
              processClass: 'asciimath'
          },
          tex2jax: {
              inlineMath: [['|','|']]
          }
        });
    </script>
  </body>
</html>
